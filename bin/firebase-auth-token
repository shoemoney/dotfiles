#!/bin/sh -eu
# =============================================================================
# 🔥 Firebase Auth Token Generator 🔥
# =============================================================================
# 🔑 Generates authentication tokens for Firebase API
# 📝 Uses email and password to generate secure tokens

# Check for required parameters
if [ $# -lt 3 ]; then
    echo "Usage: $0 <apiKey> <email> <password>"
    exit 1
fi

apiKey=${1}
email=${2}
password=${3}

curl "https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}" \
-H "Content-Type: application/json" \
--data-binary "{\"email\":\"${email}\",\"password\":\"${password}\",\"returnSecureToken\":true}" | jq -r .idToken

# see https://qiita.com/kazakago/items/892a8c5df76a912f1d82
